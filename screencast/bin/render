#!/bin/bash

# Check params
[[ $# != 1 ]] && echo usage: "$0 <project>" && exit

project=$1

echo Starting render to \"$project\"

# Create a directory for this project
mkdir -p $project
pushd $project

clear
# filters="fps=15,scale=800:-1:flags=lanczos"
# ffmpeg -y -f x11grab -video_size 3200x1800 -i :0.0 -filter:v $filters capture.gif >& /dev/null &

# Start capture
ffmpeg -y -f x11grab -video_size 3200x1800 -i :0.0 -filter:v scale=800:-1 render.gif >& /dev/null &

# Store process ID so we can kill it later
pid=$!

# Start keystroke playback
scriptreplay cast.timing cast

# Stop screen capture
kill $pid
